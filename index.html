<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø³ÙˆÙ‚ Ø£Ø¨ÙˆØ§Ù„ÙˆÙØ§ â€“ Ù…ØªØ¬Ø± Ø§Ù„ÙƒØªØ¨</title>
  <meta name="description" content="Ù…ØªØ¬Ø± ÙƒØªØ¨ Ø¹Ø±Ø¨ÙŠ Ø¨ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ: ØªØµÙØ­ØŒ ØªÙØ§ØµÙŠÙ„ØŒ ØªØ¹Ù„ÙŠÙ‚Ø§ØªØŒ Ø³Ù„Ø©ØŒ ÙˆØ¯ÙØ¹ Ø¨ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´." />
  <style>
    :root{
      --brand:#008ecc;          /* Ø£Ø²Ø±Ù‚ Ø£Ø³Ø§Ø³ÙŠ */
      --brand-2:#0672a8;        /* Ø¯Ø±Ø¬Ø© Ø£Ø¯ÙƒÙ† */
      --accent:#ffb703;         /* Ø£ØµÙØ± Ø¯Ø§ÙØ¦ */
      --bg:#f6f7fb;             /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© */
      --card:#ffffff;           /* Ø¨Ø·Ø§Ù‚Ø§Øª */
      --text:#1f2937;           /* Ù†Øµ Ø£Ø³Ø§Ø³ÙŠ */
      --muted:#6b7280;          /* Ù†Øµ Ø«Ø§Ù†ÙˆÙŠ */
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --radius:16px;
      --nav-h:66px;
      --maxw:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Cairo","Tahoma",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.65;
    }
    /* ====== Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© ====== */
    header{
      position:sticky; top:0; z-index:30;
      background:linear-gradient(90deg,var(--brand),var(--brand-2));
      color:#fff;
      box-shadow:var(--shadow);
    }
    .topbar{
      max-width:var(--maxw);
      margin:0 auto;
      padding:14px 16px;
      display:flex; align-items:center; gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px;
      font-size:20px;
    }
    .brand .dot{width:10px; height:10px; border-radius:50%; background:var(--accent)}
    .search{
      margin-inline-start:auto;
      display:flex; align-items:center; gap:8px;
      background:rgba(255,255,255,.14);
      padding:8px 12px; border-radius:999px; min-width:200px; width:min(520px,58vw);
    }
    .search input{
      background:transparent; border:0; outline:0; color:#fff; width:100%; font-size:14px;
    }
    .search input::placeholder{color:rgba(255,255,255,.8)}
    /* ====== Ø§Ù„ÙˆØ¹Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ====== */
    main{max-width:var(--maxw); margin:0 auto; padding:18px 16px calc(var(--nav-h) + 20px)}
    .page{display:none}
    .page.active{display:block}
    /* ====== Ø´Ø¨ÙƒØ© Ø§Ù„ÙƒØªØ¨ ====== */
    .grid{
      display:grid; gap:16px;
      grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    }
    .card{
      background:var(--card); border-radius:var(--radius); overflow:hidden;
      box-shadow:var(--shadow); transition:transform .18s ease, box-shadow .18s ease;
      cursor:pointer; display:flex; flex-direction:column;
    }
    .card:hover{transform:translateY(-4px); box-shadow:0 12px 28px rgba(0,0,0,.12)}
    .thumb{aspect-ratio:3/4; width:100%; object-fit:cover}
    .meta{padding:10px 12px 14px}
    .title{margin:0 0 6px; font-size:15px; font-weight:800}
    .price{font-size:14px; color:var(--brand-2); font-weight:800}
    /* ====== ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨ ====== */
    .details{
      display:grid; grid-template-columns:320px 1fr; gap:24px;
      align-items:start;
    }
    .details img{width:100%; border-radius:var(--radius); box-shadow:var(--shadow); object-fit:cover}
    .badge{display:inline-block; background:#eef2ff; color:#1e3a8a; padding:4px 10px; border-radius:999px; font-size:12px; margin-inline-start:6px}
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .btn{
      border:0; outline:0; border-radius:12px; padding:10px 14px; cursor:pointer;
      font-weight:800; transition:.18s ease; box-shadow:var(--shadow); font-size:14px;
    }
    .btn.brand{background:var(--brand); color:#fff}
    .btn.brand:hover{background:var(--brand-2)}
    .btn.ghost{background:#fff}
    .muted{color:var(--muted); font-size:14px}
    .divider{height:1px; background:#e5e7eb; margin:16px 0}
    .reviews .item{background:#fff; border-radius:12px; padding:12px 14px; box-shadow:var(--shadow); margin-bottom:10px}
    .add-comment{display:flex; gap:8px}
    .add-comment input{flex:1; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; font-size:14px}
    /* ====== Ø§Ù„Ø³Ù„Ø© ====== */
    .cart-row{
      display:grid; grid-template-columns:68px 1fr auto auto; gap:12px; align-items:center;
      background:#fff; border-radius:14px; padding:10px 12px; box-shadow:var(--shadow); margin-bottom:10px
    }
    .cthumb{width:68px; height:92px; border-radius:10px; object-fit:cover}
    .qty{display:flex; align-items:center; gap:8px}
    .qty button{width:28px; height:28px; border-radius:8px; border:0; background:#eef2f7; cursor:pointer; font-weight:900}
    .totals{display:flex; justify-content:space-between; align-items:center; background:#fff; border-radius:16px; padding:14px 16px; box-shadow:var(--shadow); margin-top:12px; font-weight:900}
    /* ====== Ù„ÙˆØ­Ø§Øª Ø¹Ø§Ù…Ø© ====== */
    .panel{background:#fff; border-radius:16px; padding:16px; box-shadow:var(--shadow)}
    .panel input{width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:12px; font-size:14px}
    /* ====== Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ Ø«Ø§Ø¨Øª ====== */
    .bottom-nav{
      position:fixed; bottom:0; left:0; right:0; height:var(--nav-h); z-index:40;
      background:#fff; border-top:1px solid #e5e7eb; display:flex; justify-content:space-around; align-items:center;
      box-shadow:0 -8px 18px rgba(0,0,0,.06)
    }
    .nav-item{display:flex; flex-direction:column; align-items:center; gap:4px; color:#111; text-decoration:none; font-size:12px}
    .nav-item.active{color:var(--brand)}
    .pill{display:inline-flex; min-width:20px; height:20px; border-radius:999px; background:var(--accent); color:#111; font-weight:900; align-items:center; justify-content:center; font-size:12px; padding:0 6px}
    /* ====== Responsiveness ====== */
    @media (max-width:1024px){ .details{grid-template-columns:260px 1fr} }
    @media (max-width:860px){ .details{grid-template-columns:1fr} }
    @media (max-width:520px){
      .grid{grid-template-columns:repeat(2,minmax(0,1fr))}
      .topbar{padding:12px}
      .brand{font-size:18px}
      .search{width:100%}
    }
    @media (max-width:360px){
      .grid{grid-template-columns:1fr} /* ÙƒØªØ§Ø¨ ÙˆØ§Ø­Ø¯ ÙÙŠ Ø§Ù„ØµÙ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ */
    }
  </style>
</head>
<body>

  <!-- ====== Header ====== -->
  <header>
    <div class="topbar">
      <div class="brand">ğŸ“š Ø³ÙˆÙ‚ Ø£Ø¨ÙˆØ§Ù„ÙˆÙØ§ <span class="dot"></span></div>
      <label class="search">ğŸ”
        <input id="q" type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨..." oninput="filterBooks(this.value)">
      </label>
    </div>
  </header>

  <!-- ====== Main ====== -->
  <main>
    <!-- ØµÙØ­Ø© Ø§Ù„ÙƒØªØ¨ -->
    <section id="page-books" class="page active">
      <div id="booksGrid" class="grid"></div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ -->
    <section id="page-details" class="page">
      <div class="details">
        <img id="dImg" alt="ØºÙ„Ø§Ù Ø§Ù„ÙƒØªØ§Ø¨">
        <div>
          <h2 id="dTitle" style="margin:.2rem 0 .4rem; font-size:26px; font-weight:900"></h2>
          <div class="muted">Ø§Ù„Ø³Ø¹Ø±: <b id="dPrice"></b> Ø¬Ù†ÙŠÙ‡ <span id="dBadge" class="badge">ÙƒØªØ§Ø¨ Ù…Ù…ÙŠØ²</span></div>
          <div class="actions">
            <button class="btn brand" onclick="addCurrentToCart()">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© ğŸ›’</button>
            <button class="btn ghost" onclick="goBack()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
          </div>
          <div class="divider"></div>
          <p id="dDesc" style="font-size:15px"></p>

          <div class="divider"></div>
          <div class="reviews">
            <h3 style="margin:0 0 8px">ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h3>
            <div id="reviewsList"></div>
            <div class="add-comment" style="margin-top:10px">
              <input id="commentInput" type="text" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ ÙˆØ§Ø¶ØºØ· Ø¥Ø¶Ø§ÙØ©...">
              <button class="btn brand" onclick="addComment()">Ø¥Ø¶Ø§ÙØ©</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø³Ù„Ø© -->
    <section id="page-cart" class="page">
      <h2 style="margin:0 0 10px">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h2>
      <div id="cartList"></div>
      <div class="totals">
        <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">0</span> Ø¬Ù†ÙŠÙ‡</div>
        <div class="qty">
          <button class="btn ghost" onclick="clearCart()">ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©</button>
          <button class="btn brand" onclick="showPage('payment')">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ø¯ÙØ¹</button>
        </div>
      </div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ -->
    <section id="page-account" class="page">
      <div class="panel">
        <h2 style="margin-top:0">ğŸ‘¤ Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
        <div id="authBox">
          <p class="muted">Ø³Ø¬Ù‘Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© (Ù†Ù…ÙˆØ°Ø¬ Ù…Ø­Ù„ÙŠ Ù„Ù„ØªØ¬Ø±Ø¨Ø©)</p>
          <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
            <input id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ...">
            <button class="btn brand" onclick="fakeLogin()">ØªØ³Ø¬ÙŠÙ„</button>
          </div>
        </div>
        <div id="welcomeBox" class="panel hide" style="margin-top:10px">
          <p style="margin:0">Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ <b id="welcomeName"></b> ğŸ‰</p>
          <div class="actions" style="margin-top:8px">
            <button class="btn ghost" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹ -->
    <section id="page-payment" class="page">
      <div class="panel">
        <h2 style="margin-top:0">ğŸ’³ Ø§Ù„Ø¯ÙØ¹</h2>
        <p>Ù…Ù† ÙØ¶Ù„Ùƒ Ù‚Ù… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ø¨Ø± <b>ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</b> Ø¥Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…:</p>
        <p style="font-size:22px; font-weight:900; color:#d00000; margin:.4rem 0">01553073695</p>
        <p class="muted">Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ø§Ø­ØªÙØ¸ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.</p>
        <div class="divider"></div>
        <div><b>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨:</b></div>
        <div id="paySummary" class="muted" style="margin-top:6px"></div>
        <div class="actions" style="margin-top:10px">
          <button class="btn brand" onclick="confirmOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</button>
          <button class="btn ghost" onclick="showPage('cart')">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ====== Bottom Nav ====== -->
  <nav class="bottom-nav">
    <a id="nav-books" class="nav-item active" href="#" onclick="showPage('books')">ğŸ  <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
    <a id="nav-cart" class="nav-item" href="#" onclick="showPage('cart')">ğŸ›’ <span>Ø§Ù„Ø³Ù„Ø© <span id="cartCount" class="pill">0</span></span></a>
    <a id="nav-account" class="nav-item" href="#" onclick="showPage('account')">ğŸ‘¤ <span>Ø§Ù„Ø­Ø³Ø§Ø¨</span></a>
    <a id="nav-payment" class="nav-item" href="#" onclick="showPage('payment')">ğŸ’³ <span>Ø§Ù„Ø¯ÙØ¹</span></a>
  </nav>

  <!-- ====== JavaScript ====== -->
  <script>
    /* ====== ØªÙˆÙ„ÙŠØ¯ 100 ÙƒØªØ§Ø¨ Ø¨Ø¯ÙˆÙ† Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ====== */
    const nouns = ['Ø§Ù„Ø­ÙƒÙ…Ø©','Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©','Ø§Ù„Ø¥Ù„Ù‡Ø§Ù…','Ø§Ù„Ù†Ø¬Ø§Ø­','Ø§Ù„ÙØ´Ù„','Ø§Ù„ØµØ¨Ø±','Ø§Ù„Ø´Ø¬Ø§Ø¹Ø©','Ø§Ù„Ù‡Ø¯ÙˆØ¡','Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©','Ø§Ù„ØªÙØ§ÙˆØ¶','Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹','Ø§Ù„Ø®ÙŠØ§Ù„','Ø§Ù„Ø·Ù…ÙˆØ­','Ø§Ù„Ø¹Ø§Ø¯Ø§Øª','Ø§Ù„ØªÙÙƒÙŠØ±','Ø§Ù„Ù…Ø¹Ø±ÙØ©','Ø§Ù„Ø¹Ù„Ù…','Ø§Ù„Ø¹Ù…Ù„','Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„','Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§','Ø§Ù„Ù„ØºØ©','Ø§Ù„ØªØ§Ø±ÙŠØ®','Ø§Ù„ÙÙ„Ø³ÙØ©','Ø§Ù„Ø£Ø¯Ø¨','Ø§Ù„Ø±Ø­Ù„Ø©','Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©','Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯','Ø§Ù„Ù…Ø§Ù„','Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©','Ø§Ù„ØªØ³ÙˆÙŠÙ‚','Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©','Ø§Ù„ØªØµÙ…ÙŠÙ…','Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰','Ø§Ù„ØªØµÙˆÙŠØ±','Ø§Ù„Ø´Ø¹Ø±','Ø§Ù„Ø·Ø¨Ø®','Ø§Ù„ØµØ­Ø©','Ø§Ù„Ù„ÙŠØ§Ù‚Ø©','Ø§Ù„ØªØ±Ø¨ÙŠØ©','Ø§Ù„Ù†ÙØ³','Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª','Ø§Ù„ÙˆÙ‚Øª','Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª','Ø§Ù„ØªÙˆØ§ØµÙ„','Ø§Ù„Ø¥Ù‚Ù†Ø§Ø¹','Ø§Ù„ØªÙˆØ§Ø²Ù†','Ø§Ù„Ù…Ø±ÙˆÙ†Ø©','Ø§Ù„Ù‚ÙŠÙ…','Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±','Ø§Ù„ØªØ±ÙƒÙŠØ²','Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©','Ø§Ù„ÙˆØ¹ÙŠ','Ø§Ù„Ø¹Ù‚Ù„','Ø§Ù„ØªØ£Ø«ÙŠØ±','Ø§Ù„Ø±ÙŠØ§Ø¯Ø©','Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·','Ø§Ù„Ø·Ø§Ù‚Ø©','Ø§Ù„Ø°Ù‡Ù†','Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª','Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±','Ø§Ù„ØªØ¹Ù„Ù‘Ù…','Ø§Ù„Ø°Ø§ÙƒØ±Ø©','Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©','Ø§Ù„ØªØ­Ù„ÙŠÙ„','Ø§Ù„Ø­ÙŠØ§Ø©','Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø±','Ø§Ù„ÙÙ†','Ø§Ù„Ø³ÙŠÙ†Ù…Ø§','Ø§Ù„Ø³Ø±Ø¯','Ø§Ù„Ù‚ØµØ©','Ø§Ù„Ø¯Ø±Ø§Ù…Ø§','Ø§Ù„Ø±Ø­Ù„Ø§Øª','Ø§Ù„Ø·Ù‡ÙŠ','Ø§Ù„Ø¨Ø³ØªÙ†Ø©','Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©','Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª','Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ','Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ','Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨','Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±','Ø§Ù„Ø£Ø³ÙˆØ§Ù‚','Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©','Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹','Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†','Ø§Ù„Ø¯Ø¨Ù„ÙˆÙ…Ø§Ø³ÙŠØ©','Ø§Ù„Ø£Ø·ÙØ§Ù„','Ø§Ù„Ù…Ø¯Ø±Ø³Ø©','Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©','Ø§Ù„Ù…Ù†Ø·Ù‚','Ø§Ù„Ø£Ø®Ù„Ø§Ù‚','Ø§Ù„ÙƒÙˆÙ†','Ø§Ù„ÙØ¶Ø§Ø¡','Ø§Ù„Ø·ÙŠØ±Ø§Ù†','Ø§Ù„Ù…Ø­ÙŠØ·Ø§Øª','Ø§Ù„Ø¨ÙŠØ¦Ø©','Ø§Ù„Ø²Ø±Ø§Ø¹Ø©','Ø§Ù„ØªØ±Ø¬Ù…Ø©','Ø§Ù„ØªØ¯ÙˆÙŠÙ†','Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠ','Ø§Ù„ØªØºØ°ÙŠØ©'];
    const adjectives = ['Ø§Ù„Ù…Ø¨Ø³Ù‘Ø·','Ø§Ù„Ø¹Ù…Ù„ÙŠ','Ø§Ù„Ù…ØªÙ‚Ø¯Ù…','Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†','Ø§Ù„Ø´Ø§Ù…Ù„','Ø§Ù„Ù…ÙƒØ«Ù‘Ù','Ø§Ù„Ù…Ø±Ø´Ø¯','Ø§Ù„Ø­Ø¯ÙŠØ«','Ø§Ù„ÙØ¹Ù‘Ø§Ù„','Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠ','Ø§Ù„Ø¥Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ','Ø§Ù„ÙŠÙˆÙ…ÙŠ','Ø§Ù„Ø³Ø±ÙŠØ¹','Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ','Ø§Ù„Ù…ØªÙˆØ§Ø²Ù†','Ø§Ù„Ø¹Ù…ÙŠÙ‚','Ø§Ù„Ø°Ù‡Ø¨ÙŠ','Ø§Ù„Ø±Ù‚Ù…ÙŠ','Ø§Ù„Ù…Ø¹Ø§ØµØ±','Ø§Ù„Ù…ÙÙ„Ù‡Ù…'];
    const starters = ['ÙÙ†','Ù‚ÙˆØ©','Ø£Ø³Ø±Ø§Ø±','Ø¯Ù„ÙŠÙ„','Ù…Ø¯Ø®Ù„ Ø¥Ù„Ù‰','Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰','Ø®Ø§Ø±Ø·Ø© Ø·Ø±ÙŠÙ‚','Ø£Ø³Ø§Ø³ÙŠØ§Øª','Ù…Ø®ØªØµØ±','Ø®Ø·ÙˆØ© Ø®Ø·ÙˆØ© Ø¥Ù„Ù‰'];

    function slugify(s){return s.toLowerCase().replace(/\s+/g,'-').replace(/[^\u0600-\u06FFa-z0-9\-]/g,'')}
    function generateBooks(count=100){
      const set = new Set(), arr=[];
      let i=0, guard=0;
      while(arr.length<count && guard<6000){
        guard++;
        const form = i%5;
        const n = nouns[i % nouns.length];
        const a = adjectives[(i*3) % adjectives.length];
        const st = starters[(i*7) % starters.length];
        let title='';
        if(form===0) title = `${st} ${n}`;
        if(form===1) title = `${n} ${a}`;
        if(form===2) title = `${st} ${n} ${a}`;
        if(form===3) title = `Ø·Ø±ÙŠÙ‚ ${n}`;
        if(form===4) title = `Ù„ØºØ© ${n}`;
        title = title.replace(/\s+/g,' ').trim();
        if(!set.has(title)){
          set.add(title);
          const slug = slugify(title);
          const price = 80 + ((i*7) % 101); // 80..180
          arr.push({
            id:slug + '_' + (i+1),
            title,
            price,
            image:`https://picsum.photos/seed/${encodeURIComponent(slug)}/400/560`,
            desc:`Â«${title}Â» ÙŠÙ‚Ø¯Ù… Ø£ÙÙƒØ§Ø±Ù‹Ø§ Ø¹Ù…Ù„ÙŠØ© ÙˆÙ‚ØµØµÙ‹Ø§ Ù…ÙˆØ¬Ø²Ø© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ‡Ù… ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø­ÙŠØ§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©. Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù‚Ø±Ù‘Ø§Ø¡ Ø§Ù„Ø°ÙŠÙ† ÙŠØ¨Ø­Ø«ÙˆÙ† Ø¹Ù† Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© ÙˆØ§Ù‚Ø¹ÙŠØ©.`,
          });
        }
        i++;
      }
      return arr;
    }
    const BOOKS = generateBooks(100);

    /* ====== ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¨Ø³ÙŠØ· ====== */
    const LS = {
      get(k,def){try{return JSON.parse(localStorage.getItem(k)) ?? def}catch{return def}},
      set(k,v){localStorage.setItem(k,JSON.stringify(v))}
    };

    /* ====== Ø¹Ù†Ø§ØµØ± DOM ====== */
    const booksGrid = document.getElementById('booksGrid');
    const qInput = document.getElementById('q');

    const dImg = document.getElementById('dImg');
    const dTitle = document.getElementById('dTitle');
    const dPrice = document.getElementById('dPrice');
    const dDesc = document.getElementById('dDesc');
    const dBadge = document.getElementById('dBadge');
    const reviewsList = document.getElementById('reviewsList');
    const commentInput = document.getElementById('commentInput');

    const cartList = document.getElementById('cartList');
    const cartTotalEl = document.getElementById('cartTotal');
    const cartCount = document.getElementById('cartCount');
    const paySummary = document.getElementById('paySummary');

    /* ====== ØµÙØ­Ø§Øª ====== */
    function setActiveNav(id){
      ['books','cart','account','payment'].forEach(k=>{
        const el = document.getElementById('nav-'+k);
        if(el) el.classList.toggle('active', k===id);
      });
    }
    function showPage(id){
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      if(id==='books')   { document.getElementById('page-books').classList.add('active'); setActiveNav('books'); }
      if(id==='details') { document.getElementById('page-details').classList.add('active'); setActiveNav('books'); }
      if(id==='cart')    { document.getElementById('page-cart').classList.add('active'); setActiveNav('cart'); updateCartUI(); }
      if(id==='account') { document.getElementById('page-account').classList.add('active'); setActiveNav('account'); }
      if(id==='payment') { document.getElementById('page-payment').classList.add('active'); setActiveNav('payment'); updateCartUI(); }
      window.scrollTo({top:0,behavior:'smooth'});
    }

    /* ====== Ø¹Ø±Ø¶ Ø´Ø¨ÙƒØ© Ø§Ù„ÙƒØªØ¨ ====== */
    function renderBooks(list=BOOKS){
      booksGrid.innerHTML='';
      list.forEach(b=>{
        const card=document.createElement('article');
        card.className='card';
        card.onclick=()=>openDetails(b.id);
        card.innerHTML=`
          <img class="thumb" loading="lazy" src="${b.image}" alt="${b.title}">
          <div class="meta">
            <h3 class="title">${b.title}</h3>
            <div class="price">${b.price} Ø¬Ù†ÙŠÙ‡</div>
          </div>`;
        booksGrid.appendChild(card);
      });
    }
    function filterBooks(q){
      q=(q||'').trim();
      const list = !q ? BOOKS : BOOKS.filter(b=>b.title.includes(q));
      renderBooks(list);
    }

    /* ====== ØªÙØ§ØµÙŠÙ„ ÙˆØªØ¹Ù„ÙŠÙ‚Ø§Øª ====== */
    let currentBook=null;
    function commentsKey(){return 'comments_'+(currentBook?.id||'')}
    function openDetails(id){
      const b=BOOKS.find(x=>x.id===id);
      if(!b) return;
      currentBook=b;
      dImg.src=b.image;
      dTitle.textContent=b.title;
      dPrice.textContent=b.price;
      dDesc.textContent=b.desc;
      dBadge.textContent = (b.price>130?'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§':'ÙƒØªØ§Ø¨ Ù…Ø®ØªØ§Ø±');
      renderComments();
      showPage('details');
    }
    function goBack(){ showPage('books'); if(qInput.value) filterBooks(qInput.value); }
    function renderComments(){
      const items = LS.get(commentsKey(), ["Ù…ÙÙŠØ¯ ÙˆØ¹Ù…Ù„ÙŠØŒ Ø£Ø¹Ø¬Ø¨Ù†ÙŠ Ø§Ù„Ø¹Ø±Ø¶.","Ù…Ø®ØªØµØ± ÙˆÙˆØ§Ø¶Ø­ Ø¬Ø¯Ù‹Ø§.","Ø£Ù†ØµØ­ Ø¨Ù‚Ø±Ø§Ø¡ØªÙ‡ ğŸ‘Œ"]);
      reviewsList.innerHTML='';
      items.forEach(c=>{
        const d=document.createElement('div');
        d.className='item'; d.textContent=c;
        reviewsList.appendChild(d);
      });
    }
    function addComment(){
      const v=(commentInput.value||'').trim();
      if(!v) return;
      const items=LS.get(commentsKey(),[]);
      items.push(v); LS.set(commentsKey(),items);
      commentInput.value=''; renderComments();
    }

    /* ====== Ø§Ù„Ø³Ù„Ø© ====== */
    function cartKey(){return 'cart_v1'}
    function getCart(){return LS.get(cartKey(),[])}
    function saveCart(c){LS.set(cartKey(),c); updateCartUI()}
    function addCurrentToCart(){
      if(!currentBook) return;
      const c=getCart();
      const i=c.findIndex(x=>x.id===currentBook.id);
      if(i>-1) c[i].qty+=1;
      else c.push({id:currentBook.id,title:currentBook.title,price:currentBook.price,image:currentBook.image,qty:1});
      saveCart(c);
    }
    function updateQty(id,delta){
      const c=getCart(); const i=c.findIndex(x=>x.id===id);
      if(i>-1){ c[i].qty+=delta; if(c[i].qty<=0) c.splice(i,1); saveCart(c); }
    }
    function removeItem(id){ saveCart(getCart().filter(x=>x.id!==id)); }
    function clearCart(){ saveCart([]); }
    function updateCartUI(){
      const c=getCart();
      const count=c.reduce((a,x)=>a+x.qty,0);
      cartCount.textContent=count;
      cartList.innerHTML='';
      let total=0;
      c.forEach(it=>{
        total+=it.price*it.qty;
        const row=document.createElement('div');
        row.className='cart-row';
        row.innerHTML=`
          <img class="cthumb" src="${it.image}" alt="${it.title}">
          <div>
            <div style="font-weight:900">${it.title}</div>
            <div class="muted">${it.price} Ø¬ Ã— ${it.qty}</div>
          </div>
          <div class="qty">
            <button onclick="updateQty('${it.id}',-1)">âˆ’</button>
            <div>${it.qty}</div>
            <button onclick="updateQty('${it.id}',1)">+</button>
          </div>
          <button class="btn ghost" onclick="removeItem('${it.id}')">Ø­Ø°Ù</button>`;
        cartList.appendChild(row);
      });
      cartTotalEl.textContent=total;
      paySummary.innerHTML = c.length
        ? c.map(i=>`â€¢ ${i.title} â€” ${i.qty} Ã— ${i.price} Ø¬`).join('<br>') + `<div class="divider"></div><b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¬Ù†ÙŠÙ‡</b>`
        : 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©.';
    }

    /* ====== Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù…Ø­Ù„ÙŠ Ù„Ù„ØªØ¬Ø±Ø¨Ø©) ====== */
    const nameInput=document.getElementById('nameInput');
    const welcomeBox=document.getElementById('welcomeBox');
    const welcomeName=document.getElementById('welcomeName');
    const authBox=document.getElementById('authBox');
    function fakeLogin(){
      const n=(nameInput.value||'').trim(); if(!n) return;
      LS.set('user_name',n); renderAuth();
    }
    function logout(){ localStorage.removeItem('user_name'); renderAuth(); }
    function renderAuth(){
      const n=LS.get('user_name',null);
      if(n){ welcomeName.textContent=n; welcomeBox.classList.remove('hide'); authBox.classList.add('hide'); }
      else{ welcomeBox.classList.add('hide'); authBox.classList.remove('hide'); }
    }

    /* ====== Ø¯ÙØ¹ ====== */
    function confirmOrder(){
      const total=cartTotalEl.textContent;
      alert('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù‚ÙŠÙ…Ø© '+total+' Ø¬Ù†ÙŠÙ‡. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ Ø«Ù… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©. Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!');
    }

    /* ====== ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ ====== */
    renderBooks(BOOKS);
    renderAuth();
    updateCartUI();

    // ØªØ°ÙƒÙ‘ÙØ± Ø¢Ø®Ø± ÙƒÙ„Ù…Ø© Ø¨Ø­Ø« Ù…Ø¤Ù‚ØªÙ‹Ø§
    const lastQ=sessionStorage.getItem('last_q')||'';
    if(lastQ){ qInput.value=lastQ; filterBooks(lastQ); }
    qInput.addEventListener('change',()=>sessionStorage.setItem('last_q',qInput.value||''));
  </script>
</body>
</html>
